# Музыкальный плеер
*при первом запуске, нужно выдать разрешение на память
<img src = "https://github.com/frosty77088/music-player/blob/master/screenshots/imgonline-com-ua-2to1-nepo8L5YRBEDr.png" width = "800">
<img src = "https://github.com/frosty77088/music-player/blob/master/screenshots/Screenshot_20190520-001256_framed.png" width = "400">

### Плеер позволяет осуществлять следующие действия:<br>
1. Переключение треков вперёд-назад<br>
2. Остановка воспроизведения, его продолжение<br>
3. Перемотка на любое место композиции<br>

### Основные классы и методы:
В приложении используется три активити: ```MainActivity, PathPickerActivity, PlayerActivity```<br>
1) <b>MainActivity</b><br>
При запуске приложения открывается ```MainActivity```, в котором он обращается к файлу настроек, в котором проверяется первый ли это запуск приложения. Если да, то выводит путь к корню хранилища, если нет, то к последнему сохраненному пути.<br><br>
При создании активности вызывается метод ```runtimePermission()```, который проверяет доступно ли приложению разрешение на доступ к хранилищу. Если да, то вызывается метод ```display()``` (Адаптирует массив звуковых файлов для вывода на экран). В котором создается динамический массив файлов с помощью метода ```findsong()```. Который сканирует все файлы в директории и если расширение файла mp3, то он добавляет его в массив. ```ListView```, находящийся на экране, реализует интерфейс ```OnItemClickListener()```, который отслеживает нажатия на элементы (песню) и вызывает активность плеера и переносит ее в плеер.<br><br>
```onOptionsItemSelected()``` вызывается при выборе пункта меню и открывает активность выбора пути.<br>
```onActivityResult()``` вызывается при возвращении выбора пути. Intent идущий из этой активности несет в себе переменную пути, которая в этом методе записывается в переменную пути.<br>

2) <b>PathPickerActivity</b><br>
```update_list_dir()``` вызывается первый раз при старте активности, последующие разы вызывается при смене текущей директории, получает дерево файлов и папок в папке в которой мы находимся и выводит их на экран, а также сохраняет путь к текущей папке в переменной пути.<br>
```onClickGo``` вызывается при нажатии на кнопку выбрать, создается Intent, который  переносит нас в первую активность сохраняя в себе путь текущей папки.<br>
```onClickBack``` возвращает в предыдущую директорию, работает до тех пор пока текущей директорией не станет корневая папка. Если вызвать его в корневой папке, то выведется тост о том что выше уже некуда.<br>

3) <b>PlayerActivity</b><br>
  ```onBackPressed()``` возвращает к активности выбора музыки и при этом останавливает плеер.
При нажатии кнопки плей он запускает поток ```updateseekBar```, который обновляет ```seekBar```, а также свою работу начинает медиаплеер и кружочек перемещается автоматически вместе с музыкой. При нажатии на паузу поток и медиаплеер останавливают свою работу.<br>
При нажатии вперед или назад, он перемещает трек вперед или назад. Все файлы находятся в массиве, поэтому когда мы нажимает вперед или назад, то он обращается к предыдущему или следующий элементу массива файлов.<br>

